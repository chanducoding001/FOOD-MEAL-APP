<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://kit.fontawesome.com/b5ab21a843.js" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="style.css">
    <title>Navigation Page</title>
</head>
<body>
    <!-- same header from home page -->
    <header>
        <div class="logo-nav">
            <div class="chef-logo"><img src="./images/chef-logo.jpeg" height="100px"/></div>
            <div class="logo"><h4>FOOD WORLD</h4></div>
            
        </div>
        <nav class="pages-nav">
            <h4><a href="index.html">Home</a></h4>
            <h4><a href="favourites.html">Favourites</a></h4>
            <h4><a href="about.html">About</a></h4>
            <h4><a href="#foot">Contact</a></h4>
        </nav>
        <nav class="communication-nav">
            <a href="https://www.google.com/" class="item"><i class="fa-brands fa-google"></i></a>
            <a href="https://www.linkedin.com/feed/" class="item"><i class="fa-brands fa-linkedin"></i></a>
            <a href="https://www.youtube.com/" class="item"><i class="fa-brands fa-youtube"></i></a>
            <a href="https://www.facebook.com/" class="item"><i class="fa-brands fa-facebook"></i></a>
            <a href="https://twitter.com/i/flow/login" class="item"><i class="fa-brands fa-twitter"></i></a>
            
        </nav>
    </header>
    <main>
        <!-- searched item types are displayed here -->
        <section>
            <div>
                <h4 id="desi">Searched Meal</h4>
                <h4 id="fav-cart-count"><a href="favourites.html">Cart Count:<span id="cart-count">0</span></a></h4>
            </div>
            <div id="default-meal-section1"></div>
        </section>
    </main>
    <!-- same footer from home page -->
    <footer id="foot">
        <div class="foot-headings">
            <div><h4 class="food-world">Food WORLD</h4></div>
        
        <div id="dropdowns">
            <div class="dropup-center dropup">
                <button class="btn foot-flag-btn" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                    <div class="flag-btn"><img src="./images/indian_flag.png" height="20px" width="30px"/> <h6>INDIA</h6><i class="fa-solid fa-sort-up" id="angle-up"></i></div>
                </button>
                <ul class="dropdown-menu">
                    <li><a class="dropdown-item li-a-flag" href="#"><div><img src="./images/russia_flag.png"height="20px" width="30px"/></div><h6 class="country">RUSSIA</h6></a></li>
                    <li><a class="dropdown-item li-a-flag" href="#"><div><img src="./images/usa_flag.png"height="20px" width="30px"/></div><h6 class="country">USA</h6></a></li>
                    <li><a class="dropdown-item li-a-flag" href="#"><div><img src="./images/france_flag.png"height="20px" width="30px"/></div><h6 class="country">FRANCE</h6></a></li>
                </ul>
            </div>
            <div class="dropup-center dropup">
                <button class="btn foot-flag-btn" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                    <div class="flag-btn"><i class="fa-solid fa-globe"></i> <h6>ENGLISH</h6><i class="fa-solid fa-sort-up" id="angle-up"></i></div>
                </button>
                <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="#">English</a></li>
                    <li><a class="dropdown-item" href="#">Hindi</a></li>
                    <li><a class="dropdown-item" href="#">Russia</a></li>
                    <li><a class="dropdown-item" href="#">French</a></li>
                    <li><a class="dropdown-item" href="#">Bali</a></li>
                    <li><a class="dropdown-item" href="#">Arabic</a></li>
                </ul>
            </div>
        </div>
    </div>
    <div id="foot-lists">
        <div>
            <h6 id="headings">About Food world</h6>
            <ul>
                <li class="li">who we are</li>
                <li class="li">blog</li>
                <li class="li">work with us</li>
                <li class="li">investor relations</li>
                <li class="li">report fraud</li>
                <li class="li">contact us</li>
            </ul>
        </div>
        <div>
            <h6 id="headings">Foodieverse</h6>
            <ul>
                <li class="li">Foodie</li>
                <li class="li">blinkit</li>
                <li class="li">feeding india</li>
                <li class="li">hyperpure</li>
                <li class="li">homoland</li>
                
            </ul>
        </div>
        <div>
            <h6 id="headings">For Restaurants</h6>
            <ul>
                <li class="li">partner with us</li>
                <li class="li">apps for you</li>
            </ul>
            <h6 id="headings">For enterprises</h6>
            <ul>
                <li class="li">food for enterprises</li>
            </ul>
        </div>
        <div>
            <h6 id="headings">learn more</h6>
            <ul>
                <li class="li">privacy</li>
                <li class="li">security</li>
                <li class="li">terms</li>
                <li class="li">sitemap</li>
            </ul>
        </div>
        <div>
            <h6 id="headings">social links</h6>
            <nav class="communication-nav nav-links">

                <a href="https://www.google.com/" class="item"><i class="fa-brands fa-google"></i></a>
                <a href="https://www.linkedin.com/feed/" class="item"><i class="fa-brands fa-linkedin"></i></a>
                <a href="https://www.youtube.com/" class="item"><i class="fa-brands fa-youtube"></i></a>
                <a href="https://www.facebook.com/" class="item"><i class="fa-brands fa-facebook"></i></a>
                <a href="https://twitter.com/i/flow/login" class="item"><i class="fa-brands fa-twitter"></i></a>
                
            </nav>
            <div class="apple-div">
                <a href="https://www.apple.com/in/store">
                
                    <div class="apple">
                        <i class="fa-brands fa-apple"></i>
                        <div><small>download on the</small><h6>app store</h6></div>
                    </div>
                
            </a>
        </div>
        <div class="apple-div">
            <a href="https://play.google.com/store/apps">
            
                <div class="apple">
                    <i class="fa-brands fa-google-play"></i>
                    <div><small>download on the</small><h6>google play</h6></div>
                </div>
            
        </a>
    </div>
            
        </div>
    </div>
    </footer>

    <script>
        // i had set "mealId" array in local storage  and getting it here to update local storage after adding items and to display cart count
        //JSON.parse() takes json object and gives javascript object so to use mealId in localstorage which is in JSON object format,used json.parse to convert it to array

        let cartArr=JSON.parse(localStorage.getItem("mealId"));
        let cartCount=document.getElementById("cart-count");
        //deep copying mealId data which is stored in cartArr to arr
        let arr=[...cartArr];
        //displaying cart count
        cartCount.innerHTML=arr.length;
        let displayDish=document.getElementById("default-meal-section1");
        //i had set "searchedDish" in local storge to store searched item and to use here to display items in API
        let getSearchedDish=localStorage.getItem("searchedDish");
async function getItems(){
    //using localstorage stored dish item fetching data from api
    let fetched=await fetch(`https://www.themealdb.com/api/json/v1/1/search.php?s=${getSearchedDish}`);
        let data=await fetched.json();
    
        data.meals.map(async (item)=>{
            // for each item i am displaying in image card format using "bootstrap"
        let outputContent=`
        <div class="card" style="width: 18rem; margin:10px;">
            
            <img src="${await item.strMealThumb}" class="card-img-top" alt="...">
            <div class="card-body">
                <h5 class="card-title">${await item.strMeal}</h5>
                <button class="btn btn-primary favourites" onclick="addToCart(${await item.idMeal})" >Add</i></button>
            </div>
        
        </div>
        
        `;
        //displaying each product card in displayDish page
        displayDish.innerHTML+=outputContent;
        });
    }
    getItems();
    //in the product card, to the "add button" i gave each "item id" present in data of api as an argument to addToCart()
    
function addToCart(event){
    // that id i am storing in array "arr"
    arr.push(event);
    //as there is no process to update localstorage arr i am "removing" that mealId after copying all its contents to "arr"
    //which we have done above and setting new array with same name in local storage
    localStorage.removeItem("mealId");
    localStorage.setItem("mealId",JSON.stringify(arr));
    //so in order to continuously update cart count i am calling updatelocalStorage()
updatelocalStorage();

}
function updatelocalStorage(){
    //again i am getting local storage mealId and displaying its length in cart count
let cartCountValue=JSON.parse(localStorage.getItem("mealId"));
cartCount.innerHTML=cartCountValue.length;
}
    </script>
</body>
</html>